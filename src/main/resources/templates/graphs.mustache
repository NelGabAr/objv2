<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objetivos</title>
    <!-- CSS de Bootstrap desde CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

    <link rel= "preconnect" href="https://fonts.googleapis.com">
    <link rel= "preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href= "https://fonts.googleapis.com/css2?family=Jacquard+12&display=swap" rel="stylesheet">
    <link rel= "stylesheet" href="/css/helloPageStyles.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>





<body class = "body">
<div class = "outside">
    <div class="centeredDiv">
        
        <div>
            <p class = "gothic">{{user.username}}</p>
        </div>


        



            <div class="horizontal">
                
              <canvas style="display: block; box-sizing: border-box; height: 400px; width: 800px;" width="800" height="400" id="myChart">
              
              </canvas>
                




            </div>


            <div>

{{#user.years}}
    <div class="anio-container">
      <button class="anio-btn" onclick="toggleMeses('{{number}}')">AÃ±o {{number}}</button>
      <div id="meses-{{number}}" class="meses" style="display: none;">
        {{#months}}
          <button class="mes-btn" onclick='actualizarGrafica("{{Id}}")'>{{name}}</button>
        {{/months}}
      </div>
    </div>
  {{/user.years}}

            </div>


    </div>
</div>
    



   <script>



 
 
function toggleMeses(anio) {
    const contenedor = document.getElementById(`meses-${anio}`);
    contenedor.style.display = contenedor.style.display === 'none' ? 'block' : 'none';

  
  }


const datasetsPorMes = {

 {{#user.years}} {{#months}}
 
  data{{Id}} : [ {{#days}}{{totalSells}}, {{/days}} 0],
  {{/months}} {{/user.years}}
};
  
  const prueba = [1.1,2.2,3.3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1,2,3,4,5,6,7,8,9,0,1];


const ctx = document.getElementById('myChart').getContext('2d');
  const miGrafico = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],
      datasets: [{
        label: 'Datos del mes',
        data: [],
        borderColor: 'rgb(75, 192, 192)',
        backgroundColor: 'rgba(75, 192, 192, 0.2)',
      }]
    },
    options: {
      responsive: true,
      plugins: {
        title: {
          display: true,
          text: 'Datos por Mes'
        }
      }
    }
  });

  function actualizarGrafica(monthId) {
    const name = datasetsPorMes[`data${monthId}`];
    miGrafico.data.datasets[0].data = name;
    miGrafico.data.labels = Array.from({ length: name.length }, (_, i) => i + 1);
    miGrafico.update();
    
  }

</script>

</body>
</html>
